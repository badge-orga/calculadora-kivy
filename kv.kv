#:import hex kivy.utils.get_color_from_hex
#:import utils kivy.utils

ScreenManager:
    SplashScreen:
    Calculator:
    AboutScreen:

<SplashScreen>:
    canvas.before:
        Color:
            rgb: utils.get_color_from_hex("#81b29a")

    MDScreen:
        name: "splashscreen"
        id: splashscreen

        MDBoxLayout:
            MDFloatLayout:
                Image:
                    source:'jap.png'
                    allow_stretch: True
                    anim_delay: 5
                    anim_loop: 5
                    anim_reset: True
                MDLabel:
                    text: 'Dev JAP Apps'
                    halign: 'center'


                MDLabel:
                    text: 'Bienvenido'
                    halign: 'center'
                    pos_hint:{'center_y':.4}

<Calculator>:
    name: 'firstscreen'
    ScreenManager:
        Screen:                
            MDScreen:
                BoxLayout:
                    orientation: 'vertical'
                    MDTopAppBar:
                        id: toolbar
                        pos_hint: {"top" : 1}
                        title:"Calculadora"
                        left_action_items:[["menu",lambda x:nav_drawer.set_state("open")]]
                    TextInput:
                        id: display
                        readonly: True
                        font_size: '32sp'
                        halign: 'right'
                        multiline: True
                        height: self.minimum_height
                    GridLayout:
                        cols: 4
                        spacing: 11
                        MDRaisedButton:
                            text: '7'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '8'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '9'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '/'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '4'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '5'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '6'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '*'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '1'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '2'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '3'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '-'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '0'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '.'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: '='
                            on_press: root.calculate()
                        MDRaisedButton:
                            text: '+'
                            on_press: root.on_press(self.text)
                        MDRaisedButton:
                            text: 'C'
                            on_press: root.clear()

            MDNavigationDrawer:
                id: nav_drawer
                MDList:
                    id: md_list
                    pos_hint: {"top": 1}
                    MDLabel:
                        text: "Menú"
                        size_hint_y: None

                    OneLineIconListItem:
                        text: "Inicio"
                        on_release:
                            root.manager.current = 'firstscreen'
                            root.ids.nav_drawer.set_state(new_state='toggle', animation=True)
                        IconLeftWidget:
                            icon: "account-plus-outline"


                    OneLineIconListItem:
                        text: "Acerca de"
                        on_release:
                            root.manager.current = 'about'
                            root.ids.nav_drawer.set_state(new_state='toggle', animation=True)
                        IconLeftWidget:
                            icon: "bookmark-plus-outline" 



<AboutScreen>:
    name: 'about'
    ScreenManager:
        Screen:                
            MDScreen:
                BoxLayout:
                    orientation: 'vertical'
                    MDTopAppBar:
                        id: toolbar
                        pos_hint: {"top" : 1}
                        title: "Acerca de"
                        left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]

                    ScrollView:
                        GridLayout:
                            cols: 1
                            spacing: dp(10)
                            padding: dp(10)

                            MDLabel:
                                text: "Acerca de"
                                halign: 'center'
                                font_style: 'H5'
                            MDCard:
                                size_hint_y: None
                                pos_hint:'center'

                                MDBoxLayout:
                                    orientation: 'vertical'
                                    Image:
                                        source: 'jap.png'
                            MDLabel:
                                text: 'Aplicación desarrollada por JAP.\nHacemos aplicaciones web, de escritorio, móbiles y más.\nEspecialistas en automatización y soluciones en tecnología\nVisita la página la página oficial del desarrollador para más información.'
                                halign: 'center'


            MDNavigationDrawer:
                id: nav_drawer
                MDList:
                    id: md_list
                    pos_hint: {"top": 1}
                    MDLabel:
                        text: "Menú"
                        size_hint_y: None

                    OneLineIconListItem:
                        text: "Inicio"
                        on_release:
                            root.manager.current = 'firstscreen'
                            root.ids.nav_drawer.set_state(new_state='toggle', animation=True)
                        IconLeftWidget:
                            icon: "account-plus-outline"

                    OneLineIconListItem:
                        text: "Acerca de"
                        on_release:
                            root.manager.current = 'about'
                            root.ids.nav_drawer.set_state(new_state='toggle', animation=True)
                        IconLeftWidget:
                            icon: "bookmark-plus-outline" 
